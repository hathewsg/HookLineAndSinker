<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/browse_style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <title>Index</title>
    <script type="module">
        
        window.addEventListener("DOMContentLoaded", async () => {
            try {
                const response = await fetch("apps.json");
                if (!response.ok) throw new Error("Failed to load apps.json");
                const apps = await response.json();

                // Apps to preview
                const topRated = apps.slice(0, 3);
                const funApps = apps.slice(3, 6);

                // Populate Top Rated
                topRated.forEach((app, i) => {
                    const container = document.getElementById(`app-container${i + 1}`);
                    if (container) {
                        container.innerHTML = `
                            <img src="site_images/app_images/${app["image-name"]}"
                                alt="logo for ${app.name}">
                            <h4>${app.name}</h4>
                            <p>Subscription: $${app.subscription}</p>
                            <p>Released: ${app["release-date"]}</p>
                        `;
                    }
                })

                // Populate Fun Apps
                funApps.forEach((app, i) => {
                    const container = document.getElementById(`app-container${i + 4}`);
                    if (container) {
                        container.innerHTML = `
                            <img src="site_images/app_images/${app["image-name"]}" 
                                alt="logo for ${app.name}" class="app-thumb"/>
                            <h4>${app.name}</h4>
                            <p>Subscription: $${app.subscription}</p>
                            <p>Released: ${app["release-date"]}</p>
                        `;
                    }
                });
            } catch (error) {
                console.error("Error loading apps: ", error);
            }
        })
    </script>
</head>

<body class="background">
    <div class="whole-page">
        <div class="header">
            <a href="index.html">
                <img src="site_images/logo_v2.png" alt="Logo" class="logo">
            </a>
            <div class="nav-links">
                <div class="left">
                    <a href="index.html">Home</a>
                    <a href="browse.html">Browse</a>
                    <a href="about.html">About</a>
                    <a href="request.html">Contact</a>
                    <button onclick="toggleSearch()">
                        <a><img src="site_images/magniglass.png" alt="magnifying glass" class="search-icon"></a>
                    </button>
                    <div id="searchForm" class="search-container">
                        <input type="text" placeholder="Search..." class="search-input">
                        <button type="submit" class="search-submit">Go</button>
                    </div>
                </div>
                <div class="right">
                    <a href="profile.html">
                        <img src="site_images/Default_pfp.png" alt="Profile" class="profile-icon">
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="main-section">
        <div class="top-row">
            <div class="top-inner">
                <p>
                    Welcome to Hook, Line, and Sinker, your one-stop app store for all things relationship-oriented!
                    Whether you're a single looking for love or someone already in a relationship looking for a way
                    to keep things smooth, you can
                    find an app to help you here! Browse through our curated selection of relationship application,
                    from dating apps to journaling apps.
                    Dive in and discover the tools you need to make your next or current relationship a success!
                </p>
            </div>
            <div class="top-inner">
                <p>
                    Our list of apps include:
                </p>
                <ul>
                    <li>Dating apps</li>
                    <li>Couples counseling apps</li>
                    <li>Communication apps</li>
                    <li>Journaling apps</li>
                    <li>Fun activity apps for couples</li>
                    <li>And more!</li>
                </ul>

            </div>
        </div>
        <div class="app-rows">
            <h2 style="font-family: 'Pacifico', cursive; color: #660F3B;">Top Rated Apps</h2>
            <div id="top-rated" class="main-app-list">
                <button>
                    <div id="app-container1" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
                <button>
                    <div id="app-container2" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
                <button>
                    <div id="app-container3" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
            </div>
            <h2 style="font-family: 'Pacifico', cursive; color: #660F3B;">Fun Apps to Try</h2>
            <div id="fun-apps" class="main-app-list">
                <button>
                    <div id="app-container4" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
                <button>
                    <div id="app-container5" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
                <button>
                    <div id="app-container6" class="app-card">
                        <h4>PLACEHOLDER</h4>
                        <p>Title: lorem ipsum</p>
                        <p>Rating: lorem ipsum</p>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="nav-links">
            <a href="index.html">Back to Top</a>
            <a href="about.html">About</a>
            <a href="request.html">Contact</a>
        </div>
    </div>
    </div>
</body>

<script>
    function toggleSearch() {
        const searchForm = document.getElementById('searchForm');
        searchForm.classList.toggle('active');
    }
</script>

</html>