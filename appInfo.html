<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/app_info_style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <title>App Information</title>

    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBAVYqd4OKNVgWCtRbtLCHTw8DcqE22jBk",
            authDomain: "hooklineandsinker-be8aa.firebaseapp.com",
            projectId: "hooklineandsinker-be8aa",
            storageBucket: "hooklineandsinker-be8aa.firebasestorage.app",
            messagingSenderId: "403793372999",
            appId: "1:403793372999:web:97190bead00da9d6760e62"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);

        const db = firebase.database();
        const auth = firebase.auth();
    </script>
</head>

<body class="background">
    <div class="whole-page">
        <div class="header">
            <a href="index.html">
                <img src="site_images/logo_v2.png" alt="Logo" class="logo">
            </a>
            <div class="nav-links">
                <div class="left">
                    <a href="index.html">Home</a>
                    <a href="browse.html">Browse</a>
                    <a href="about.html">About</a>
                    <a href="request.html">Contact</a>
                    <button onclick="toggleSearch()">
                        <a><img src="site_images/magniglass.png" alt="magnifying glass" class="search-icon"></a>
                    </button>
                    <div id="searchForm" class="search-container">
                        <input type="text" placeholder="Search..." class="search-input">
                        <button type="submit" class="search-submit">Go</button>
                    </div>
                </div>
                <div class="right">
                    <a href="profile.html">
                        <img src="site_images/Default_pfp.png" alt="Profile" class="profile-icon">
                    </a>
                </div>

            </div>
        </div>


    </div>
    <div class="main-section">
        <div class="app_info">
            <div class="left-side">
                <div class="app-title">
                    <h1 id="app-title">App Name</h1>
                </div>
                <div class="app-img" id="app-img">
                    <img src="site_images/placeholder_app_img.png" alt="App Image" class="app-image" id="app-image">
                </div>
                <div class="sites-available" id="sites-available">
                    <!-- Appstores the app are available on will load here -->
                </div>
                <div class="star-rating">
                    <h2>Rating: <strong id="star-rating">★★★★☆ (placeholder)</strong></h2>
                </div>
                <div class="price">
                    <h2>Price: <strong id="price">Free/Paid</strong></h2>
                </div>
                <div class="Users">
                    <h2 id="users"></h2>
                </div>
                <div class="add-comment button">
                    <a href="browse.html">
                        <button>Go back</button>
                    </a>
                </div>

            </div>

            <div class="right-side">
                <div class="description">
                    <h2>Full Description:</h2>
                    <p id="description">
                        This is a placeholder description for the app. Here you will find detailed information about
                        the app's features, functionality, and benefits. Learn how this app can help you improve your
                        relationships and enhance your connection with others. :3
                    </p>

                    <p id="developer-name">
                        <strong>Company:</strong>
                        <!-- Company Loaded Here -->
                    </p>
                    <p id="release">
                        <strong>Release Date: </strong>
                        <!-- Release Data Loaded Here -->
                    </p>
                    <p id="app-type">
                        <strong>App Type:</strong>
                        <!-- App Type Loaded Here -->
                    </p>
                </div>
                <div class="comment-section">
                    <div class="top">
                        <h2>Comments:</h2>
                    </div>

                    <!-- comment input area-->
                    <div class="add-comment">
                        <textarea id="commentInput" placeholder="comment here..."></textarea>
                        <button id="postBtn">Post Comment</button>
                    </div>
                    
                    <!-- comments will appear here-->
                    <div id="commentList">
                        <!-- Comments loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="nav-links">
            <a href="appInfo.html">Back to Top</a>
            <a href="about.html">About</a>
            <a href="request.html">Contact</a>
        </div>
    </div>
    <script>
        function toggleSearch() {
            const searchForm = document.getElementById('searchForm');
            searchForm.classList.toggle('active');
        }

        // Enable search redirect from other pages
    document.addEventListener('DOMContentLoaded', () => {
        const searchForm = document.getElementById('searchForm');
        if (!searchForm) return; // safety check

        const searchInput = searchForm.querySelector('.search-input');
        const searchButton = searchForm.querySelector('.search-submit');

        // Helper to handle the redirect
        function handleSearch() {
            const query = searchInput.value.trim();
            if (query) {
                // Redirect to browse page with query
                window.location.href = `browse.html?search=${encodeURIComponent(query)}`;
            } else {
                // Go to browse page with no filters
                window.location.href = `browse.html`;
            }
        }

        // When button is clicked
        searchButton.addEventListener('click', (e) => {
            e.preventDefault();
            handleSearch();
        });

        // When pressing Enter
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleSearch();
            }
        });
    });
    </script>
    <script src="scripts/comments.js"></script>
    <script type="module" src="scripts/AppInfoLoader.js"></script>
</body>
</html>
